function u(){const e=document.querySelector(".filter-pill.active")?.getAttribute("data-category")||"all",s=document.getElementById("cloud-provider-filter")?.value||"",d=document.getElementById("oss-filter")?.checked||!1,f=document.getElementById("production-ready-filter")?.checked||!1,y=document.getElementById("status-filter")?.value||"all",h=document.querySelectorAll("input[data-tag]:checked"),o=Array.from(h).map(r=>r.getAttribute("data-tag")||"").filter(Boolean),c=document.getElementById("stars-filter"),i=c?.value?parseInt(c.value,10):0;return{category:e,cloudProvider:s,openSourceOnly:d,productionReadyOnly:f,status:y,tags:o,minStars:i}}function a(){const t=u(),e=new CustomEvent("filter-change",{detail:t,bubbles:!0});document.dispatchEvent(e),B(),I(),b(),g()}function B(){const t=document.getElementById("clear-filters");if(!t)return;const e=u();let n=0;e.category!=="all"&&n++,e.cloudProvider!==""&&n++,e.openSourceOnly&&n++,e.productionReadyOnly&&n++,e.status!=="all"&&n++,e.tags.length>0&&n++,e.minStars>0&&n++;const s=n>0;t.classList.toggle("hidden",!s),k(n)}function k(t){const e=document.getElementById("filter-count-badge");e&&(t>0?(e.textContent=t.toString(),e.classList.remove("hidden")):e.classList.add("hidden"))}function C(){const t=document.getElementById("filter-content"),e=document.getElementById("mobile-filter-chevron");if(!t||!e)return;t.classList.contains("hidden")?(t.classList.remove("hidden"),e.classList.add("rotate-180")):(t.classList.add("hidden"),e.classList.remove("rotate-180"))}function I(){const t=u(),e=document.getElementById("cloud-provider-container");if(!e)return;const n=t.category==="Managed"||t.category==="InfraAsCode";e.classList.toggle("hidden",!n)}function b(){const t=u(),e=document.getElementById("stars-filter-container");if(e&&(e.classList.toggle("hidden",!t.openSourceOnly),!t.openSourceOnly)){const n=document.getElementById("stars-filter");n&&(n.value="")}}function w(){const t=document.getElementById("tags-dropdown-menu");if(!t)return;const e=t.classList.contains("hidden");if(t.classList.toggle("hidden"),e){const n=document.getElementById("tags-search-input");n&&setTimeout(()=>n.focus(),100)}}function v(){const t=document.getElementById("tags-search-input");if(!t)return;const e=t.value.toLowerCase();document.querySelectorAll(".tag-option").forEach(s=>{const d=(s.getAttribute("data-tag-label")||"").includes(e);s.style.display=d?"":"none"})}function g(){const t=document.getElementById("tags-dropdown-label");if(!t)return;const e=u().tags;e.length===0?t.textContent="Tags":t.textContent=`Tags (${e.length})`}function L(){document.querySelectorAll(".filter-pill").forEach(d=>{d.classList.remove("active"),d.getAttribute("data-category")==="all"&&d.classList.add("active")});const t=document.getElementById("cloud-provider-filter");t&&(t.value="");const e=document.getElementById("oss-filter");e&&(e.checked=!1);const n=document.getElementById("production-ready-filter");n&&(n.checked=!1);const s=document.getElementById("status-filter");s&&(s.value="all"),document.querySelectorAll("input[data-tag]").forEach(d=>{const m=d;m.checked=!1});const l=document.getElementById("stars-filter");l&&(l.value=""),g(),a()}function E(){document.getElementById("mobile-filter-toggle")?.addEventListener("click",C),document.querySelectorAll(".filter-pill").forEach(o=>{o.addEventListener("click",c=>{const i=c.currentTarget;document.querySelectorAll(".filter-pill").forEach(r=>{r.classList.remove("active")}),i.classList.add("active"),a()})}),document.getElementById("cloud-provider-filter")?.addEventListener("change",a),document.getElementById("oss-filter")?.addEventListener("change",a),document.getElementById("production-ready-filter")?.addEventListener("change",a);const l=document.getElementById("detailed-view-filter");l?.addEventListener("change",()=>{const o=l.checked,c=new CustomEvent("detailed-view-change",{detail:{isDetailed:o},bubbles:!0});document.dispatchEvent(c)}),document.getElementById("status-filter")?.addEventListener("change",a),document.getElementById("tags-dropdown-button")?.addEventListener("click",o=>{o.stopPropagation(),w()}),document.getElementById("tags-search-input")?.addEventListener("input",v),document.getElementById("tags-dropdown-menu")?.addEventListener("click",o=>{o.stopPropagation()}),document.querySelectorAll("input[data-tag]").forEach(o=>{o.addEventListener("change",()=>{g(),a()})}),document.getElementById("stars-filter")?.addEventListener("change",a),document.addEventListener("click",o=>{const c=document.getElementById("tags-dropdown-menu"),i=document.getElementById("tags-dropdown-button");if(c&&i&&!c.classList.contains("hidden")){const r=o.target;if(!c.contains(r)&&!i.contains(r)){c.classList.add("hidden");const p=document.getElementById("tags-search-input");p&&(p.value="",v())}}}),document.getElementById("clear-filters")?.addEventListener("click",L),B(),I(),b(),g()}window.addEventListener("filters-reset",()=>{L()});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();
