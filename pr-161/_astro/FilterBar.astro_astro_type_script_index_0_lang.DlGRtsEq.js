function g(){const e=document.querySelector(".filter-pill.active")?.getAttribute("data-category")||"all",n=document.getElementById("cloud-provider-filter")?.value||"",d=document.getElementById("oss-filter")?.checked||!1,h=document.getElementById("production-ready-filter")?.checked||!1,y=document.querySelectorAll("[data-status]:checked"),p=Array.from(y).map(u=>u.getAttribute("data-status")||"").filter(Boolean),s=document.querySelectorAll("input[data-tag]:checked"),a=Array.from(s).map(u=>u.getAttribute("data-tag")||"").filter(Boolean),l=document.getElementById("stars-filter"),r=l?.value?parseInt(l.value,10):0;return{category:e,cloudProvider:n,openSourceOnly:d,productionReadyOnly:h,statuses:p,tags:a,minStars:r}}function i(){const t=g(),e=new CustomEvent("filter-change",{detail:t,bubbles:!0});document.dispatchEvent(e),b(),B(),I(),m()}function b(){const t=document.getElementById("clear-filters");if(!t)return;const e=g(),o=e.statuses.length===1&&e.statuses[0]==="active";let n=0;e.category!=="all"&&n++,e.cloudProvider!==""&&n++,e.openSourceOnly&&n++,e.productionReadyOnly&&n++,o||n++,e.tags.length>0&&n++,e.minStars>0&&n++;const c=n>0;t.classList.toggle("hidden",!c),S(n)}function S(t){const e=document.getElementById("filter-count-badge");e&&(t>0?(e.textContent=t.toString(),e.classList.remove("hidden")):e.classList.add("hidden"))}function k(){const t=document.getElementById("filter-content"),e=document.getElementById("mobile-filter-chevron");if(!t||!e)return;t.classList.contains("hidden")?(t.classList.remove("hidden"),e.classList.add("rotate-180")):(t.classList.add("hidden"),e.classList.remove("rotate-180"))}function B(){const t=g(),e=document.getElementById("cloud-provider-container");if(!e)return;const o=t.category==="Managed"||t.category==="InfraAsCode";e.classList.toggle("hidden",!o)}function I(){const t=g(),e=document.getElementById("stars-filter-container");if(e&&(e.classList.toggle("hidden",!t.openSourceOnly),!t.openSourceOnly)){const o=document.getElementById("stars-filter");o&&(o.value="")}}function C(){const t=document.getElementById("tags-dropdown-menu");if(!t)return;const e=t.classList.contains("hidden");if(t.classList.toggle("hidden"),e){const o=document.getElementById("tags-search-input");o&&setTimeout(()=>o.focus(),100)}}function v(){const t=document.getElementById("tags-search-input");if(!t)return;const e=t.value.toLowerCase();document.querySelectorAll(".tag-option").forEach(n=>{const d=(n.getAttribute("data-tag-label")||"").includes(e);n.style.display=d?"":"none"})}function m(){const t=document.getElementById("tags-dropdown-label");if(!t)return;const e=g().tags;e.length===0?t.textContent="Tags":t.textContent=`Tags (${e.length})`}function L(){document.querySelectorAll(".filter-pill").forEach(c=>{c.classList.remove("active"),c.getAttribute("data-category")==="all"&&c.classList.add("active")});const t=document.getElementById("cloud-provider-filter");t&&(t.value="");const e=document.getElementById("oss-filter");e&&(e.checked=!1);const o=document.getElementById("production-ready-filter");o&&(o.checked=!1),document.querySelectorAll("[data-status]").forEach(c=>{const d=c,f=c.getAttribute("data-status");d.checked=f==="active"}),document.querySelectorAll("input[data-tag]").forEach(c=>{const d=c;d.checked=!1});const n=document.getElementById("stars-filter");n&&(n.value=""),m(),i()}function E(){document.getElementById("mobile-filter-toggle")?.addEventListener("click",k),document.querySelectorAll(".filter-pill").forEach(s=>{s.addEventListener("click",a=>{const l=a.currentTarget;document.querySelectorAll(".filter-pill").forEach(r=>{r.classList.remove("active")}),l.classList.add("active"),i()})}),document.getElementById("cloud-provider-filter")?.addEventListener("change",i),document.getElementById("oss-filter")?.addEventListener("change",i),document.getElementById("production-ready-filter")?.addEventListener("change",i);const c=document.getElementById("detailed-view-filter");c?.addEventListener("change",()=>{const s=c.checked,a=new CustomEvent("detailed-view-change",{detail:{isDetailed:s},bubbles:!0});document.dispatchEvent(a)}),document.querySelectorAll("[data-status]").forEach(s=>{s.addEventListener("change",i)}),document.getElementById("tags-dropdown-button")?.addEventListener("click",s=>{s.stopPropagation(),C()}),document.getElementById("tags-search-input")?.addEventListener("input",v),document.getElementById("tags-dropdown-menu")?.addEventListener("click",s=>{s.stopPropagation()}),document.querySelectorAll("input[data-tag]").forEach(s=>{s.addEventListener("change",()=>{m(),i()})}),document.getElementById("stars-filter")?.addEventListener("change",i),document.addEventListener("click",s=>{const a=document.getElementById("tags-dropdown-menu"),l=document.getElementById("tags-dropdown-button");if(a&&l&&!a.classList.contains("hidden")){const r=s.target;if(!a.contains(r)&&!l.contains(r)){a.classList.add("hidden");const u=document.getElementById("tags-search-input");u&&(u.value="",v())}}}),document.getElementById("clear-filters")?.addEventListener("click",L),b(),B(),I(),m()}window.addEventListener("filters-reset",()=>{L()});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",E):E();
