function g(){const e=document.querySelector(".filter-pill.active")?.getAttribute("data-category")||"all",n=document.getElementById("cloud-provider-filter")?.value||"",l=document.getElementById("oss-filter")?.checked||!1,m=document.getElementById("production-ready-filter")?.checked||!1,f=document.querySelectorAll("[data-status]:checked"),o=Array.from(f).map(a=>a.getAttribute("data-status")||"").filter(Boolean),s=document.querySelectorAll("input[data-tag]:checked"),r=Array.from(s).map(a=>a.getAttribute("data-tag")||"").filter(Boolean);return{category:e,cloudProvider:n,openSourceOnly:l,productionReadyOnly:m,statuses:o,tags:r}}function i(){const t=g(),e=new CustomEvent("filter-change",{detail:t,bubbles:!0});document.dispatchEvent(e),v(),E(),u()}function v(){const t=document.getElementById("clear-filters");if(!t)return;const e=g(),c=e.statuses.length===1&&e.statuses[0]==="active";let n=0;e.category!=="all"&&n++,e.cloudProvider!==""&&n++,e.openSourceOnly&&n++,e.productionReadyOnly&&n++,c||n++,e.tags.length>0&&n++;const d=n>0;t.classList.toggle("hidden",!d),L(n)}function L(t){const e=document.getElementById("filter-count-badge");e&&(t>0?(e.textContent=t.toString(),e.classList.remove("hidden")):e.classList.add("hidden"))}function I(){const t=document.getElementById("filter-content"),e=document.getElementById("mobile-filter-chevron");if(!t||!e)return;t.classList.contains("hidden")?(t.classList.remove("hidden"),e.classList.add("rotate-180")):(t.classList.add("hidden"),e.classList.remove("rotate-180"))}function E(){const t=g(),e=document.getElementById("cloud-provider-container");if(!e)return;const c=t.category==="Managed"||t.category==="InfraAsCode";e.classList.toggle("hidden",!c)}function k(){const t=document.getElementById("tags-dropdown-menu");if(!t)return;const e=t.classList.contains("hidden");if(t.classList.toggle("hidden"),e){const c=document.getElementById("tags-search-input");c&&setTimeout(()=>c.focus(),100)}}function y(){const t=document.getElementById("tags-search-input");if(!t)return;const e=t.value.toLowerCase();document.querySelectorAll(".tag-option").forEach(n=>{const l=(n.getAttribute("data-tag-label")||"").includes(e);n.style.display=l?"":"none"})}function u(){const t=document.getElementById("tags-dropdown-label");if(!t)return;const e=g().tags;e.length===0?t.textContent="Tags":t.textContent=`Tags (${e.length})`}function b(){document.querySelectorAll(".filter-pill").forEach(n=>{n.classList.remove("active"),n.getAttribute("data-category")==="all"&&n.classList.add("active")});const t=document.getElementById("cloud-provider-filter");t&&(t.value="");const e=document.getElementById("oss-filter");e&&(e.checked=!1);const c=document.getElementById("production-ready-filter");c&&(c.checked=!1),document.querySelectorAll("[data-status]").forEach(n=>{const d=n,l=n.getAttribute("data-status");d.checked=l==="active"}),document.querySelectorAll("input[data-tag]").forEach(n=>{const d=n;d.checked=!1}),u(),i()}function p(){document.getElementById("mobile-filter-toggle")?.addEventListener("click",I),document.querySelectorAll(".filter-pill").forEach(o=>{o.addEventListener("click",s=>{const r=s.currentTarget;document.querySelectorAll(".filter-pill").forEach(a=>{a.classList.remove("active")}),r.classList.add("active"),i()})}),document.getElementById("cloud-provider-filter")?.addEventListener("change",i),document.getElementById("oss-filter")?.addEventListener("change",i),document.getElementById("production-ready-filter")?.addEventListener("change",i);const d=document.getElementById("detailed-view-filter");d?.addEventListener("change",()=>{const o=d.checked,s=new CustomEvent("detailed-view-change",{detail:{isDetailed:o},bubbles:!0});document.dispatchEvent(s)}),document.querySelectorAll("[data-status]").forEach(o=>{o.addEventListener("change",i)}),document.getElementById("tags-dropdown-button")?.addEventListener("click",o=>{o.stopPropagation(),k()}),document.getElementById("tags-search-input")?.addEventListener("input",y),document.getElementById("tags-dropdown-menu")?.addEventListener("click",o=>{o.stopPropagation()}),document.querySelectorAll("input[data-tag]").forEach(o=>{o.addEventListener("change",()=>{u(),i()})}),document.addEventListener("click",o=>{const s=document.getElementById("tags-dropdown-menu"),r=document.getElementById("tags-dropdown-button");if(s&&r&&!s.classList.contains("hidden")){const a=o.target;if(!s.contains(a)&&!r.contains(a)){s.classList.add("hidden");const h=document.getElementById("tags-search-input");h&&(h.value="",y())}}}),document.getElementById("clear-filters")?.addEventListener("click",b),v(),E(),u()}window.addEventListener("filters-reset",()=>{b()});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p();
