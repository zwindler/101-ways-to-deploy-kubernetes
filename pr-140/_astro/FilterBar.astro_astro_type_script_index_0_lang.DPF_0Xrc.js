function g(){const e=document.querySelector(".filter-pill.active")?.getAttribute("data-category")||"all",o=document.getElementById("cloud-provider-filter")?.value||"",i=document.getElementById("oss-filter")?.checked||!1,m=document.querySelectorAll("[data-status]:checked"),f=Array.from(m).map(a=>a.getAttribute("data-status")||"").filter(Boolean),c=document.querySelectorAll("input[data-tag]:checked"),s=Array.from(c).map(a=>a.getAttribute("data-tag")||"").filter(Boolean);return{category:e,cloudProvider:o,openSourceOnly:i,statuses:f,tags:s}}function l(){const t=g(),e=new CustomEvent("filter-change",{detail:t,bubbles:!0});document.dispatchEvent(e),p(),E(),u()}function p(){const t=document.getElementById("clear-filters");if(!t)return;const e=g(),n=e.statuses.length===1&&e.statuses[0]==="active";let o=0;e.category!=="all"&&o++,e.cloudProvider!==""&&o++,e.openSourceOnly&&o++,n||o++,e.tags.length>0&&o++;const d=o>0;t.classList.toggle("hidden",!d),B(o)}function B(t){const e=document.getElementById("filter-count-badge");e&&(t>0?(e.textContent=t.toString(),e.classList.remove("hidden")):e.classList.add("hidden"))}function L(){const t=document.getElementById("filter-content"),e=document.getElementById("mobile-filter-chevron");if(!t||!e)return;t.classList.contains("hidden")?(t.classList.remove("hidden"),e.classList.add("rotate-180")):(t.classList.add("hidden"),e.classList.remove("rotate-180"))}function E(){const t=g(),e=document.getElementById("cloud-provider-container");if(!e)return;const n=t.category==="Managed"||t.category==="InfraAsCode";e.classList.toggle("hidden",!n)}function I(){const t=document.getElementById("tags-dropdown-menu");if(!t)return;const e=t.classList.contains("hidden");if(t.classList.toggle("hidden"),e){const n=document.getElementById("tags-search-input");n&&setTimeout(()=>n.focus(),100)}}function v(){const t=document.getElementById("tags-search-input");if(!t)return;const e=t.value.toLowerCase();document.querySelectorAll(".tag-option").forEach(o=>{const i=(o.getAttribute("data-tag-label")||"").includes(e);o.style.display=i?"":"none"})}function u(){const t=document.getElementById("tags-dropdown-label");if(!t)return;const e=g().tags;e.length===0?t.textContent="Tags":t.textContent=`Tags (${e.length})`}function b(){document.querySelectorAll(".filter-pill").forEach(n=>{n.classList.remove("active"),n.getAttribute("data-category")==="all"&&n.classList.add("active")});const t=document.getElementById("cloud-provider-filter");t&&(t.value="");const e=document.getElementById("oss-filter");e&&(e.checked=!1),document.querySelectorAll("[data-status]").forEach(n=>{const o=n,d=n.getAttribute("data-status");o.checked=d==="active"}),document.querySelectorAll("input[data-tag]").forEach(n=>{const o=n;o.checked=!1}),u(),l()}function y(){document.getElementById("mobile-filter-toggle")?.addEventListener("click",L),document.querySelectorAll(".filter-pill").forEach(c=>{c.addEventListener("click",s=>{const a=s.currentTarget;document.querySelectorAll(".filter-pill").forEach(r=>{r.classList.remove("active")}),a.classList.add("active"),l()})}),document.getElementById("cloud-provider-filter")?.addEventListener("change",l),document.getElementById("oss-filter")?.addEventListener("change",l);const o=document.getElementById("detailed-view-filter");o?.addEventListener("change",()=>{const c=o.checked,s=new CustomEvent("detailed-view-change",{detail:{isDetailed:c},bubbles:!0});document.dispatchEvent(s)}),document.querySelectorAll("[data-status]").forEach(c=>{c.addEventListener("change",l)}),document.getElementById("tags-dropdown-button")?.addEventListener("click",c=>{c.stopPropagation(),I()}),document.getElementById("tags-search-input")?.addEventListener("input",v),document.getElementById("tags-dropdown-menu")?.addEventListener("click",c=>{c.stopPropagation()}),document.querySelectorAll("input[data-tag]").forEach(c=>{c.addEventListener("change",()=>{u(),l()})}),document.addEventListener("click",c=>{const s=document.getElementById("tags-dropdown-menu"),a=document.getElementById("tags-dropdown-button");if(s&&a&&!s.classList.contains("hidden")){const r=c.target;if(!s.contains(r)&&!a.contains(r)){s.classList.add("hidden");const h=document.getElementById("tags-search-input");h&&(h.value="",v())}}}),document.getElementById("clear-filters")?.addEventListener("click",b),p(),E(),u()}window.addEventListener("filters-reset",()=>{b()});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();
